<div id="gi-viewer-container">
    <aframe-main [model]="data" [nodeIndex]="nodeIndex"></aframe-main>
    <button class='btn' id="settings_button" mat-icon-button (click)="openModal('aframe_settings_modal')" title="Settings"><mat-icon svgIcon="settings"></mat-icon></button>
    <button id="zoomingfit" mat-icon-button (click)="zoomfit()" title='Zoom to Fit Model'>
        <mat-icon svgIcon="cZoom"></mat-icon>
    </button>
    <modal-window id="aframe_settings_modal" (closeModal) = 'onCloseModal()'>
        <h1>Aframe Viewer Settings</h1>
        <tabs id="settingsTab">
            <tab tabTitle="Scene">
                <div class="mat-elevation-z1">
                    <dl>
                        <!-- <dd id='camera'>
                            <div class="label">Camera Position</div>
                            <input type="number"
                            (change)="settingOnChange('camera.pos_x', $event.target.value)" 
                            [value]="formatNumber(settings.camera.position.x)">
                            <input type="number"
                            (change)="settingOnChange('camera.pos_y', $event.target.value)" 
                            [value]="formatNumber(settings.camera.position.y)">
                            <input type="number"
                            (change)="settingOnChange('camera.pos_z', $event.target.value)" 
                            [value]="formatNumber(settings.camera.position.z)">
                            <button (click)="settingOnChange('camera.get_camera_pos')" class="filebtn getbtn">Get</button>
                        </dd>
                        <dd id='camera_target'>
                            <div class="label">Camera Target</div>
                            <input type="number"
                            (change)="settingOnChange('camera.target_x', $event.target.value)" 
                            [value]="formatNumber(settings.camera.rotation.x)">
                            <input type="number" 
                            (change)="settingOnChange('camera.target_y', $event.target.value)"
                            [value]="formatNumber(settings.camera.rotation.y)">
                            <input type="number" 
                            (change)="settingOnChange('camera.target_z', $event.target.value)"
                            [value]="formatNumber(settings.camera.rotation.z)">
                            <button (click)="settingOnChange('camera.get_target_pos')" class="filebtn getbtn">Get</button>
                        </dd>
                        <dd><hr></dd> -->
                        <dd>
                            <div class="label">Background</div>
                            <select value={{settings.background.background_set}}
                            (change)="settingOnChange('background.set', $event.target.value)">
                                <option value=0>Sky 1</option>
                                <option value=1>Sky 2</option>
                                <option value=2>Sky 3</option>
                                <!-- <option value=3>Sky 4</option>
                                <option value=4>Sky 5</option>
                                <option value=5>Sky 6</option>
                                <option value=6>Sky 7</option> -->
                            </select>
                        </dd>
                        <dd><hr></dd>
                        <dd>
                            <div class="label">Ground</div>
                            <div class="onoffswitch">
                                <input type="checkbox"
                                name="onoffswitch"
                                class="onoffswitch-checkbox"
                                id="GroundOnOff_aframe"
                                [checked]='settings.ground.show'
                                (change)="settingOnChange('ground.show')"
                                >
                                <label class="onoffswitch-label" for="GroundOnOff_aframe">
                                    <span class="onoffswitch-inner"></span>
                                    <span class="onoffswitch-switch"></span>
                                </label>
                            </div>
                        </dd>
                        <dd>
                            <div class="label">Width</div>
                            <div class="slidecontainer light">
                                <input type="range" min="0" max="100000" step="100" [value]="settings.ground.width" class="slider" (input)="settingOnChange('ground.width', $event.target.value)">
                                <input type="number" [value]="settings.ground.width" min="0" max="100000" class="number" (input)="settingOnChange('ground.width', $event.target.value)">
                            </div>
                        </dd>
                        <dd>
                            <div class="label">Length</div>
                            <div class="slidecontainer light">
                                <input type="range" min="0" max="100000" step="100" [value]="settings.ground.length" class="slider" (input)="settingOnChange('ground.length', $event.target.value)">
                                <input type="number" [value]="settings.ground.length" min="0" max="100000" class="number" (input)="settingOnChange('ground.length', $event.target.value)">
                            </div>
                        </dd>
                        <dd>
                            <div class="label">Height</div>
                            <div class="slidecontainer light">
                                <input type="range" min="-10" max="10" step="0.1" [value]="settings.ground.height" class="slider" (input)="settingOnChange('ground.height', $event.target.value)">
                                <input type="number" [value]="settings.ground.height" min="-10" max="10" class="number" (input)="settingOnChange('ground.height', $event.target.value)">
                            </div>
                        </dd>
                        <dd class='colors'>
                            <div class="label">Color</div>
                            <input
                            [(colorPicker)]="settings.ground.color"
                            [style.background]="settings.ground.color"
                            [value]="settings.ground.color"
                            [class.light] = "checkColor(settings.ground.color)"
                            />
                        </dd>
                        <dd>
                            <div class="label">Shininess</div>
                            <div class="slidecontainer light">
                                <input type="range" min="0" max="100" step="1" [value]="settings.ground.shininess" class="slider" (input)="settingOnChange('ground.shininess', $event.target.value)">
                                <input type="number" min="0" max="100" [value]="settings.ground.shininess" class="number" (input)="settingOnChange('ground.shininess', $event.target.value)">
                            </div>
                        </dd>
                    </dl>
                </div>
            </tab>
        </tabs>
        <button (click)="closeModal('aframe_settings_modal', true);" class="filebtn closebtn setting">Apply</button>
        <button (click)="closeModal('aframe_settings_modal');" class='filebtn closebtn setting'>Cancel</button>
    </modal-window>
    <div id='geo-attribution'></div>
</div>
